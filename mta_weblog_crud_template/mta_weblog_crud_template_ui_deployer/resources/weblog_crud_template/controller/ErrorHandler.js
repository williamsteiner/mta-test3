sap.ui.define(["sap/ui/base/Object","sap/m/MessageBox"],function(e,t){"use strict";return e.extend("com.owi.webmin.weblog_crud_template.controller.ErrorHandler",{constructor:function(e){this._oResourceBundle=e.getModel("i18n").getResourceBundle();this._oComponent=e;this._oModel=e.getModel();this._bMessageOpen=false;this._sErrorText=this._oResourceBundle.getText("errorText");this._oModel.attachMetadataFailed(function(e){var t=e.getParameters();this._showMetadataError(t.response)},this);this._oModel.attachRequestFailed(this.onRequestFailed,this)},onRequestFailed:function(e){var t=e.getParameters();if(t.response.statusCode!=="404"||t.response.statusCode===404&&t.response.responseText.indexOf("Cannot POST")===0){this._showServiceError(t.response)}},_showMetadataError:function(e){t.error(this._sErrorText,{id:"metadataErrorMessageBox",details:e,styleClass:this._oComponent.getContentDensityClass(),actions:[t.Action.RETRY,t.Action.CLOSE],onClose:function(e){if(e===t.Action.RETRY){this._oModel.refreshMetadata()}}.bind(this)})},_showErrorMsg:function(e,s,o){t.error(s,{id:"ErrorMessageBox",title:e,details:o,icon:t.Icon.ERROR,styleClass:this._oComponent.getContentDensityClass(),actions:t.Action.CLOSE})},_showServiceError:function(e){if(this._bMessageOpen){return}this._bMessageOpen=true;t.error(this._sErrorText,{id:"serviceErrorMessageBox",details:e.responseText,styleClass:this._oComponent.getContentDensityClass(),actions:[t.Action.CLOSE],onClose:function(){this._bMessageOpen=false}.bind(this)})}})});